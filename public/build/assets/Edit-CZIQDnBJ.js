import{_ as M,u as P,k as h,l as A,v as V,w as z,o as n,b as e,A as m,B as p,h as I,c,a as u,F as j,e as E,s as y,d as f,J as H,y as J,G as L,r as R,p as q,f as K}from"./app-h2MldgnN.js";import{_ as W}from"./GuestLayout-DxESMbO6.js";import{S as Q}from"./SummernoteEditor-g0cSdX2s.js";const a=g=>(q("data-v-a0da8ce7"),g=g(),K(),g),X={class:"p-6 bg-white shadow-xl rounded-xl max-w-4xl mx-auto"},Y=a(()=>e("h3",{class:"mb-8 text-2xl font-bold text-primary text-center uppercase border-b pb-4"}," Edit Service ",-1)),Z={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ee={class:"space-y-6"},te=a(()=>e("label",{for:"title",class:"text-sm font-medium text-gray-700 mb-2 block"},[f(" Service Name "),e("span",{class:"text-red-500"},"*")],-1)),se=a(()=>e("label",{for:"name",class:"text-sm font-medium text-gray-700 mb-2 block"}," Service Title ",-1)),oe=a(()=>e("label",{for:"category",class:"text-sm font-medium text-gray-700 mb-2 block"},[f(" Service Category "),e("span",{class:"text-red-500"},"*")],-1)),le=a(()=>e("label",{for:"order_level",class:"text-sm font-medium text-gray-700 mb-2 block"}," Order Level ",-1)),re=a(()=>e("label",{for:"icon",class:"text-sm font-medium text-gray-700 mb-2 block"}," Category Icon (SVG/HTML) ",-1)),ae={class:"space-y-6"},ie=a(()=>e("label",{class:"text-sm font-medium text-gray-700 mb-2 block"},[f(" Service Image "),e("span",{class:"text-red-500"},"*")],-1)),ne={class:"border-2 border-dashed border-gray-300 rounded-xl p-4 hover:border-primary transition-colors"},ce={for:"category-icon",class:"cursor-pointer"},de={key:0,class:"relative"},ue=["src"],me=a(()=>e("div",{class:"absolute inset-0 bg-black/0 hover:bg-black/20 transition-colors rounded-lg flex items-center justify-center opacity-0 hover:opacity-100"},[e("span",{class:"text-white font-medium bg-black/50 px-4 py-2 rounded"},"Change Image")],-1)),pe={key:1,class:"text-center py-8"},ge=a(()=>e("p",{class:"text-gray-600 font-medium"}," Upload Service Image ",-1)),ve=a(()=>e("p",{class:"text-xs text-gray-400 mt-1"}," Click to browse or drag & drop ",-1)),_e=a(()=>e("label",{class:"text-sm font-medium text-gray-700 mb-2 block"}," Gallery Images ",-1)),be={key:0,class:"mb-6"},he=a(()=>e("div",{class:"mb-2"},[e("h4",{class:"text-sm font-medium text-gray-700"}," Existing Images "),e("p",{class:"text-xs text-gray-500"}," Click the delete icon to remove images ")],-1)),ye={class:"grid grid-cols-4 gap-3"},fe=["src"],xe=["onClick"],we={class:"p-4 border-2 border-dashed border-gray-300 rounded-xl"},ke=a(()=>e("div",{class:"mb-3"},[e("h4",{class:"text-sm font-medium text-gray-700"}," Add New Images "),e("p",{class:"text-xs text-gray-500"}," Upload additional images for this service ")],-1)),Ie={key:0,class:"mb-4"},Se={class:"grid grid-cols-4 gap-3"},Ce=["src"],Ue=["onClick"],Ve={for:"mu-file-input",class:"cursor-pointer block"},je={class:"flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-primary transition-colors"},Ee=a(()=>e("p",{class:"text-gray-600 font-medium text-sm"}," Click to upload images ",-1)),Le=a(()=>e("p",{class:"text-xs text-gray-400 mt-1"}," or drag and drop ",-1)),Re=a(()=>e("p",{class:"text-xs text-gray-400"}," PNG, JPG, GIF up to 999KB ",-1)),De=a(()=>e("label",{for:"short_description",class:"text-sm font-medium text-gray-700 mb-2 block"}," Short Description ",-1)),Ne={class:"mt-8 space-y-6"},Be=a(()=>e("label",{class:"text-sm font-medium text-gray-700 mb-2 block"}," Detailed Description ",-1)),Ge={class:"editor_data bg-gray-100"},Te={class:"text-center pt-6"},$e=["disabled"],Fe={key:0},Oe={key:1,class:"flex items-center gap-2"},Me={__name:"Edit",setup(g){const{loading:S,error:Pe,sendRequest:v}=P(),D=H(),_=J(),x=h(null),w=h([]),N=async()=>{const r=await v({url:"/all-category-list",method:"get"});r&&(x.value=r.data)},C=async()=>{var t,i;const r=await v({url:`/v1/service/${(t=_==null?void 0:_.params)==null?void 0:t.id}`,method:"get"});if(r){const s=(i=r.data)==null?void 0:i.data;o.value={service_category_id:(s==null?void 0:s.service_category_id)||null,name:(s==null?void 0:s.name)||null,title:(s==null?void 0:s.title)||null,image:null,icon:(s==null?void 0:s.icon)||null,short_description:(s==null?void 0:s.short_description)||null,description:(s==null?void 0:s.description)||null,order_level:(s==null?void 0:s.order_level)||null,status:1,newImages:[]},b.value=(s==null?void 0:s.image)||null,w.value=(s==null?void 0:s.images)||[]}},b=h(null),o=h({service_category_id:null,name:null,title:null,image:null,newImages:[],icon:null,short_description:null,description:null,order_level:null,status:1}),B=r=>{const t=r.target.files[0];o.value.image=t,b.value=URL.createObjectURL(t)},G=r=>{for(let t=0;t<r.target.files.length;t++){const i=r.target.files[t];o.value.newImages.push({url:URL.createObjectURL(i),file:i})}},T=r=>{var i;const t=o.value.newImages[r];(i=t==null?void 0:t.url)!=null&&i.startsWith("blob:")&&URL.revokeObjectURL(t.url),o.value.newImages.splice(r,1)},$=async r=>{await v({method:"get",url:`/v1/delete-service-image/${r}`})&&(L.success("Service image deleted successfully",{autoclose:1e3}),C())},F=()=>{const r=new FormData;return Object.keys(o.value).forEach(t=>{t=="newImages"?o.value.newImages.forEach(({file:i})=>{r.append("newImages[]",i)}):o.value[t]!=null&&o.value[t]!=null&&r.append(t,o.value[t])}),r},O=async r=>{const t=F(),i=await v({method:"post",url:`/v1/service/${r}`,data:t,params:{_method:"PUT"},headers:{"Content-Type":"multipart/form-data"}});i!=null&&i.data&&(L.success("Service Updated Successfully",{autoclose:1e3,theme:"dark"}),await D.push("/admin/service"))};return A(()=>{C(),N()}),(r,t)=>{const i=R("Select"),s=R("Icon");return n(),V(W,null,{default:z(()=>{var U;return[e("div",X,[Y,e("div",Z,[e("div",ee,[e("div",null,[te,m(e("input",{type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary transition-colors","onUpdate:modelValue":t[0]||(t[0]=l=>o.value.title=l),placeholder:"Enter service name"},null,512),[[p,o.value.title]])]),e("div",null,[se,m(e("input",{type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary transition-colors","onUpdate:modelValue":t[1]||(t[1]=l=>o.value.name=l),placeholder:"Enter service title"},null,512),[[p,o.value.name]])]),e("div",null,[oe,x.value?(n(),V(i,{key:0,label:"name",options:x.value,reduce:l=>l.id,modelValue:o.value.service_category_id,"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.service_category_id=l),placeholder:"Select Category",class:"w-full"},null,8,["options","reduce","modelValue"])):I("",!0)]),e("div",null,[le,m(e("input",{type:"number",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary transition-colors","onUpdate:modelValue":t[3]||(t[3]=l=>o.value.order_level=l),placeholder:"Enter order number",min:"0"},null,512),[[p,o.value.order_level]])]),e("div",null,[re,m(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.icon=l),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary transition-colors h-32 resize-none",placeholder:"Paste SVG or icon HTML code here..."},null,512),[[p,o.value.icon]])])]),e("div",ae,[e("div",null,[ie,e("div",ne,[e("label",ce,[b.value?(n(),c("div",de,[e("img",{src:b.value,class:"w-full h-48 object-cover rounded-lg"},null,8,ue),me])):(n(),c("div",pe,[u(s,{name:"mdi:cloud-upload",class:"text-4xl text-gray-400 mx-auto mb-3"}),ge,ve])),e("input",{id:"category-icon",onChange:B,type:"file",hidden:"",accept:"image/*"},null,32)])])]),e("div",null,[_e,((U=w.value)==null?void 0:U.length)>0?(n(),c("div",be,[he,e("div",ye,[(n(!0),c(j,null,E(w.value,l=>(n(),c("div",{key:l.id,class:"relative group rounded-lg overflow-hidden border border-gray-200"},[e("img",{src:l.url||l,class:"w-full h-24 object-cover"},null,8,fe),e("button",{onClick:d=>$(l.id),class:"absolute top-1 right-1 w-7 h-7 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",type:"button"},[u(s,{name:"material-symbols-light:delete-outline",class:"text-sm"})],8,xe)]))),128))])])):I("",!0),e("div",we,[ke,o.value.newImages.length>0?(n(),c("div",Ie,[e("div",Se,[(n(!0),c(j,null,E(o.value.newImages,(l,d)=>(n(),c("div",{key:"new-"+d,class:"relative group rounded-lg overflow-hidden border border-gray-200"},[e("img",{src:l.url,class:"w-full h-24 object-cover"},null,8,Ce),e("button",{onClick:k=>T(d),class:"absolute top-1 right-1 w-7 h-7 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",type:"button"},[u(s,{name:"material-symbols:close",class:"text-sm"})],8,Ue)]))),128))])])):I("",!0),e("label",Ve,[e("div",je,[u(s,{name:"mdi:image-plus",class:"text-3xl text-gray-400 mb-2"}),Ee,Le,Re]),e("input",{onChange:G,id:"mu-file-input",type:"file",accept:"image/*",multiple:"",hidden:""},null,32)])])]),e("div",null,[De,m(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=l=>o.value.short_description=l),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary transition-colors h-32 resize-none",placeholder:"Brief description of the service..."},null,512),[[p,o.value.short_description]])])])]),e("div",Ne,[e("div",null,[Be,e("div",Ge,[u(y(Q),{modelValue:o.value.description,"onUpdate:modelValue":t[6]||(t[6]=l=>o.value.description=l)},null,8,["modelValue"])])]),e("div",Te,[e("button",{onClick:t[7]||(t[7]=l=>{var d,k;return O((k=(d=y(_))==null?void 0:d.params)==null?void 0:k.id)}),class:"bg-gradient-to-r from-primary to-secondary text-white font-semibold py-3 px-8 rounded-lg hover:shadow-lg hover:shadow-primary/30 transition-all duration-300 transform hover:-translate-y-0.5",disabled:y(S)},[y(S)?(n(),c("span",Oe,[u(s,{name:"mdi:loading",class:"animate-spin"}),f(" Updating... ")])):(n(),c("span",Fe,"Update Service"))],8,$e)])])])]}),_:1})}}},Je=M(Me,[["__scopeId","data-v-a0da8ce7"]]);export{Je as default};
